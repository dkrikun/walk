#!/bin/bash

target=$2

deps() {
  echo hello.o
}

compile() {
  echo "Compile"
  gcc -Wall -o "$target" "$(deps)"
}

case $1 in
  deps) deps ;;
  exec)
    if ./changed "$target" "$(deps)"; then
      compile
    fi
    ;;
esac
